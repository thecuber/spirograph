<div class="wrapper">
    <canvas #spiroCanvas *ngFor="let spiro of spiros" width="600px" height="600px" class="spiro-canvas"></canvas>
    <canvas #wrapperCanvas width="600px" height="600px" class="spiro-canvas"></canvas>
    <canvas #dotCanvas width="600px" height="600px" class="spiro-canvas"></canvas>
    <div class="settings">
        <div>
            <div class="spiro-view" *ngFor="let spiro of spiros; let index = index; let last = last;">
                <div class="spiro-title">
                    <fa-icon icon="caret-right" *ngIf="selectedCircle!=index" (click)="selectedCircle=index"></fa-icon>
                    <fa-icon icon="caret-down" *ngIf="selectedCircle==index" (click)="selectedCircle=-1"></fa-icon>
                    <fa-icon icon="eye" *ngIf="!spiro.visible" (click)="setVisible(true, spiro)"></fa-icon>
                    <fa-icon icon="eye-slash" *ngIf="spiro.visible" (click)="setVisible(false, spiro)"></fa-icon>
                    <div class="colorico" [ngStyle]="{'--color_hue':spiro.color_hue, '--color_light': spiro.color_light + '%', '--color_sat': spiro.color_sat + '%'}"></div> Circlee
                </div>
                <div class="spiro-settings" *ngIf="selectedCircle==index">
                    <label for="hue_slider">Hue</label>
                    <ngx-slider id="hue_slider" [(value)]="spiro.color_hue" [options]="sliderOptions(0, 360)" (userChange)="settingsModified()"></ngx-slider>
                    <label for="hue_slider">Saturation</label>
                    <ngx-slider id="hue_slider" [(value)]="spiro.color_sat" [options]="sliderOptions(0, 100)" (userChange)="settingsModified()"></ngx-slider>
                    <label for="hue_slider">Outer spiro size (%)</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.outerSize" [type]="'ratio'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">Inner width size (%)</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.innerWidth" [type]="'ratio'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">inner height size (%)</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.innerHeight" [type]="'ratio'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">Inner X Delta (%)</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.innerXDelta" [type]="'ratio'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">Inner Angle Delta</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.innerAngleDelta" [type]="'angle'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">Initial inner rotation</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.innerRotation" [type]="'angle'" (change)="settingsModified()"></app-custom-slider>
                    <label for="hue_slider">Initial outer rotation</label>
                    <app-custom-slider id="hue_slider" [(value)]="spiro.outerRotation" [type]="'angle'" (change)="settingsModified()"></app-custom-slider>
                </div>
                <hr *ngIf="!last">
            </div>
        </div>
        <div class="actions">
            <button (click)="addSpiro()">Add spirograph</button>
            <button (click)="actionClicked()" [disabled]="spiros.length == 0">{{state}}</button>
        </div>
    </div>
</div>